<DEFMACRO NAME="HEADER_HEAD_OPEN">
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=[#CHARSET]" />
</DEFMACRO>

<DEFMACRO NAME="HEADER_HEAD_CLOSE">  
<script type="text/javascript" src="[#SHAREURL]/js/interface.js"></script>
    <link rel="stylesheet" href="styles_lodel.css" />
    <IF COND="[#STYLECSS]">
    <style type="text/css">          
      [#STYLECSS]
    </style>
    </IF>
  </head>
</DEFMACRO>

<DEFMACRO NAME="CLOSE_HTML">  
  </body>
</html>
</DEFMACRO>

<DEFMACRO NAME="HEADER_LOGO">
<body> 
</DEFMACRO>

<DEFMACRO NAME="INTERTITLE">
<IF COND="[#INTERTITLE] EQ ''">[#TITLE]<ELSE/>[#INTERTITLE]</IF>
</DEFMACRO>

<DEFMACRO NAME="HEADER_LOGO_LOGIN">
<body bgcolor="#FFFFFF"  text="Black" vlink="black" link="black" alink="black" onLoad="" marginwidth="0" marginheight="0" rightmargin="0" leftmargin=0 topmargin=0 bottommargin="0">
</DEFMACRO>

<!--[ -----------------------------------------------------------
  Print a listing of all detected errors in to the form  
--------------------------------------------------------------- ]-->
<DEFFUNC NAME="PRINT_ERROR_LISTING">
<LOOP NAME="errors">
<BEFORE>
	<a id="top"></a>
	<span class="error">
	[@COMMON.ERROR_DETECTED|sprintf([#COUNT])]
	</span>
	<ul class="error">
</BEFORE>
<DO>
		<li>
			<span class="error">
			<IF COND="[#VARNAME] eq 'identifier'">
				<FUNC NAME="PRINT_ERROR_MESSAGE" TITLE="" />
			<ELSE/>
				<LOOP NAME="gettitle" TABLE="tablefields" WHERE="name='[#VARNAME]' AND class='[#CLASS]'">
					<LET VAR="INTERTITLE">[#ALTERTITLE|multilingue([#LODELUSER.LANG])]</LET>
					<IF COND="[#INTERTITLE] EQ ''">
						<FUNC NAME="PRINT_ERROR_MESSAGE" TITLE="[#TITLE]" />
					<ELSE/><FUNC NAME="PRINT_ERROR_MESSAGE" TITLE="[#INTERTITLE]" /></IF>
				</LOOP>
			</IF>
				<a href="#[#VARNAME]">[@COMMON.CORRECT]	&raquo;</a>
			</span>
		</li>
	</DO>
<AFTER>
		</ul>
</AFTER>
</LOOP>
</DEFFUNC>

<!--[ -----------------------------------------------------------
      Print error message given the error code
--------------------------------------------------------------- ]-->
<DEFFUNC NAME="PRINT_ERROR_MESSAGE" REQUIRED="title">
<IF COND="[#ERROR] eq '+'">[@COMMON.ERROR_REQUIRED_FIELD|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq '1'">[@COMMON.ERROR_FIELD_MUST_BE_UNIQUE|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'date'">[@COMMON.ERROR_INVALID_DATE|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'time'">[@COMMON.ERROR_INVALID_TIME|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'datetime'">[@COMMON.ERROR_INVALID_DATETIME|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'int'">[@COMMON.ERROR_INVALID_INTEGER|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'number'">[@COMMON.ERROR_INVALID_NUMBER|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'class'">[@COMMON.ERROR_INVALID_CLASS|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'type'">[@COMMON.ERROR_INVALID_TYPE|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'username'">[@COMMON.ERROR_INVALID_USERNAME|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'passwd'">[@COMMON.ERROR_INVALID_PASSWD|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'tablefield'">[@COMMON.ERROR_INVALID_FIELD|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'style'">[@COMMON.ERROR_INVALID_STYLE|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'mlstyle'">[@COMMON.ERROR_INVALID_MULTILINGUAL_STYLE|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'url'">[@COMMON.ERROR_INVALID_URL|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'email'">[@COMMON.ERROR_INVALID_EMAIL|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'tplfile'">[@COMMON.ERROR_INVALID_TPLFILE|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'textgroups'">[@COMMON.ERROR_INVALID_TEXTGROUPS|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'readerror'">[@COMMON.ERROR_MISSING_FILE|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'imageformat'">[@COMMON.ERROR_FORMAT_IMAGE|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'reservedsql'">[@COMMON.ERROR_WORD_RESERVED_BY_SQL_OR_LODEL|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'reservedbylodel'">[@COMMON.ERROR_WORD_RESERVED_BY_SQL_OR_LODEL|sprintf([#TITLE])]</IF>
<IF COND="[#ERROR] eq 'upload'">[@COMMON.ERROR_UPLOAD_FILE]</IF>
<IF COND="[#ERROR] eq 'identifier'">[@COMMON.THIS_IDENTIFIER_IS_ALREADY_USED]</IF>
<!--[ Unknown error ]-->
</DEFFUNC>



<!--[ ************************************************** ]-->

<!--[ Macros rajoutï¿½s le 17/11/03 ********************* ]-->
<!--[ Macros servant ï¿½publication.html et               ]-->
<!--[ document.html                                      ]-->
<DEFMACRO NAME="AFFICHER_CHAMPS_DU_GROUPE_EDITION">
<!--[ Permet de lister tous les champs d'un groupe de    ]-->
<!--[ champs                                             ]-->

	<LOOP NAME="edition_fields">
		<BEFORE><!--[ information sur le groupe. Ne s'affichent que s'il y a des champs editable ]-->
			<IF COND="[#IDGROUP]">
			<fieldset>
				<legend>
				<MACRO NAME="INTERTITLE">
				</legend>
			</IF>
		</BEFORE>
        <DO>
	<LET VAR="INTERTITLE">[#ALTERTITLE|multilingue([#LODELUSER.LANG])]</LET>
	  <label for="[#NAME]" class="[#TYPE]"><MACRO NAME="INTERTITLE"></label><br class="nobr" />
	<FUNC NAME="PRINT_EDIT_FIELD" VARNAME="[#NAME]" FULLVARNAME="data[[#NAME]]" VALUE="[#VALUE]" TYPE="[#TYPE]" EDITION="[#EDITION]" EDITIONPARAMS="[#EDITIONPARAMS]">
	<br />
        </DO>
        <AFTER>
	<IF COND="[#IDGROUP]">
	</fieldset>
	</IF>
        </AFTER>
    </LOOP>
</DEFMACRO>

<!--[ -----------------------------------------------------------
  Parameters management macro
  Syntax : Mode, Width, Height, Language, AutoDetectLanguage, Skin
  Example :
          Simple, 800, 600
        or	
          Advanced, 800, 600, en, false, Silver
--------------------------------------------------------------- ]-->
<DEFMACRO NAME="FCK_EDITOR_PARAMETERS">
<?php
  $parameters = explode(',', $context['editionparams']);
  if( is_array($parameters) )
  {
    //Advanced mode or not
    if(trim($parameters[0]) === 'Advanced' || trim($parameters[0]) === 'Simple' || trim($parameters[0]) === 'Basic')
      $context['fck_mode'] = trim($parameters[0]);
    else
      $context['fck_mode'] = 'Advanced';
    //Width (by default will be 600px)
    $context['fck_width'] = (($parameters[1])  ? intval($parameters[1]) : 550);
    //Height (by default will be 400px)
    $context['fck_height'] = (($parameters[2]) ? intval($parameters[2]) : 400);
    //Language (by default will be empty)
    $context['fck_language'] = ($parameters[3] ? trim($parameters[3]) : $context['lodeluser']['lang']);
    $context['fck_autodetectlanguage'] = 'false';
		//SkinName (by default will be default :p)
    $context['fck_skin'] = (($parameters[5]) ? trim($parameters[5]) : 'silver');
  }
  else
  {
    $context['fck_width'] = 600;
    $context['fck_height'] = 400;
    $context['fck_skin'] = 'default';
    $context['fck_autodetectlanguage'] = 'false';
    $context['fck_language'] = $context['lodeluser']['lang'];
    $context['fck_mode'] = 'Advanced';
  }
?>
</DEFMACRO>

<!-- [ Test Jean ]-->
<DEFFUNC NAME="PRINT_EDIT_FIELD_XSLT" REQUIRED="varname,value,type,fullvarname" OPTIONAL="edition,editionparams,eventattr,confirm">
<LET VAR="edition">display</LET>
<IF COND="[#TYPE] eq 'mltext'">
  <br />
  <div id="mltext_[#VARNAME]" class="mltexteditionarea">
	<div id="mltext_[#VARNAME]_for_copy" style="display: none;">
		<label>XXX</label>
		<FUNC NAME="PRINT_EDIT_FIELD" TYPE="text" EDITION="" VARNAME="[#VARNAME][__lodel_wildcard]" FULLVARNAME="[#VARNAME][__lodel_wildcard]" VALUE="" />
		<a href="#" onClick="deletelanginmltext(this);return false;">[@COMMON.DELETE]</a>
	</div>
	<LOOP NAME="mltext"> <!--[ champ multilingue ]-->
	<div>
		<label>[(#LANG|humanlang|ucfirst)] :</label>
		<FUNC NAME="PRINT_EDIT_FIELD" TYPE="text" EDITION="" VARNAME="[#VARNAME][[#LANG]]" FULLVARNAME="[#VARNAME][[#LANG]]" VALUE="[#VALUE]" />
		<a href="#" onClick="deletelanginmltext(this);return false;">[@COMMON.DELETE]</a>
	</div>
	</LOOP>
	<div>
		<select onChange="addlanginmltext(this,'[#VARNAME]');"><?php makeselectlangs(); ?></select>
	</div>
  </div>
<br />
</IF>
</DEFFUNC>

<!--[ -----------------------------------------------------------
      Widget pour l'edition des differents types de champs
--------------------------------------------------------------- ]-->

<DEFFUNC NAME="PRINT_EDIT_FIELD" REQUIRED="varname,value,type,fullvarname" OPTIONAL="edition,editionparams,eventattr,confirm">
<!--[ --------------- CONFIRM--------------------------- ]-->
<IF COND="[#CONFIRM]">
<LET VAR="eventattr">[#EVENTATTR] onChange="[#CONFIRM]();"</LET>
</IF>
<!--[ --------------- DISPLAY ONLY------------ -------------- ]-->

<IF COND="[#EDITION] eq 'display'">
	<IF COND="[#TYPE] eq 'mltext'"> <!--[ multi-lingue ]-->
	  <LOOP NAME="mltext"> <!--[ champ multilingue ]-->
	    <div class="mlTitle">[(#LANG|humanlang|ucfirst)]</div><div class="displayfield">[#VALUE]</div>
	  </LOOP>
	<ELSE/> <!--[ other cases ]-->
		<div class="editiondisplay"><IF COND="[#TYPE] ne 'passwd'">[#VALUE]<ELSE/>*******</IF></div>
	</IF>
<ELSE/>
<!--[ --------------- TEXT, LONGTEXT, USERNAME, EMAIL, URL -------------- ]-->
<IF COND="[#TYPE] eq 'text' or [#TYPE] eq 'tinytext' or [#TYPE] eq 'longtext' or [#TYPE] eq 'username' or [#TYPE] eq 'longtext' or [#TYPE] eq 'url' or [#TYPE] eq 'email' or [#TYPE] eq 'history'">
	
	<IF COND="[#EDITION] EQ 'fckeditor'">
	<LET VAR="FCKEDITOR_DIR">[#SHAREURL]/plugins/fckeditor/</LET>
 	<MACRO NAME="FCK_EDITOR_PARAMETERS">
<?php
$context['fckvarname'] = str_replace(array('[',']'),  array('_',''), $context['varname']);
?>	
    <script type="text/javascript" src="[#FCKEDITOR_DIR]fckeditor.js"></script>
    <script type="text/javascript">
    	var fck_[#FCKVARNAME]_editor = new FCKeditor('[#FULLVARNAME]','[#FCK_WIDTH]','[#FCK_HEIGHT]');
    	fck_[#FCKVARNAME]_editor.ToolbarSet = "[#FCK_MODE]";
 	fck_[#FCKVARNAME]_editor.BasePath = '[#FCKEDITOR_DIR]';
    	fck_[#FCKVARNAME]_editor.Config["AutoDetectLanguage"] = [#FCK_AUTODETECTLANGUAGE];
    	fck_[#FCKVARNAME]_editor.Config["DefaultLanguage"] = "[#FCK_LANGUAGE]";
    	fck_[#FCKVARNAME]_editor.Config["SkinPath"] = "../skins/[#FCK_SKIN]/";
    	fck_[#FCKVARNAME]_editor.Config["EditorAreaCSS"] = "css/fck_editorarea.css";
    	<?$context["value"] = str_replace("\n","",$context["value"]) ?>
    	<?$context["value"] = str_replace("\r","",$context["value"]); ?>
    	fck_[#FCKVARNAME]_editor.Value = "[#VALUE|html_entity_decode|addslashes]";
    	fck_[#FCKVARNAME]_editor.Create();
    </script>
    <ELSE/>   
	<IF COND="[#EDITIONPARAMS] gt 1">
			<textarea rows="[#EDITIONPARAMS]" cols="50" name="[#FULLVARNAME]" id="[#VARNAME]" [#EVENTATTR]>[#VALUE]</textarea>
	<ELSE/>
		<input size="50" type="text" name="[#FULLVARNAME]" id="[#VARNAME]" [#EVENTATTR] value="[#VALUE]" />
        </IF>
      </IF>

<ELSE/>
<!--[ --------------- PASSWD -------------- ]-->
<IF COND="[#TYPE] eq 'passwd'">
<input size="50" type="password" name="[#FULLVARNAME]" id="[#VARNAME]" [#EVENTATTR] />
<ELSE/>
<!--[ --------------- BOOLEAN -------------- ]-->
<IF COND="[#TYPE] eq 'boolean'">
    <input type="checkbox" class="noText" name="[#FULLVARNAME]" id="[#VARNAME]" [#EVENTATTR] [#VALUE|yes] />
<ELSE/>
<!--[ --------------- INT, NUMBER -------------- ]-->
<IF COND="[#TYPE] eq 'int' or [#TYPE] eq 'number'">
    <input type="text" name="[#FULLVARNAME]" id="[#VARNAME]" value="[#VALUE]" />
<ELSE/>
<!--[ --------------- MLTEXT -------------- ]-->
<IF COND="[#TYPE] eq 'mltext'">
  <FUNC NAME="EDIT_MLTEXT">
<ELSE/>
<!--[ --------------- LANG,SELECT ------------- ]-->
<IF COND="[#TYPE] eq 'lang' or [#TYPE] eq 'select'">
	      <select name="[#FULLVARNAME]" id="[#VARNAME]" [#EVENTATTR]>
		<?php  makeSelect($context,"value",$context['lo'],$context['type']); ?>
	    </select>
<ELSE/>
<!--[ --------------- MULTIPLESELECT ------------- ]-->
<IF COND="[#TYPE] eq 'multipleselect'">
	      <select name="[#VARNAME][]" id="[#VARNAME]" [#EVENTATTR] multiple>
		<?php  makeSelect($context,"value","",$context['type']); ?>
	    </select>
<ELSE/>
<!--[ --------------- DATE DATETIME TIME ------------- ]-->	    
<IF COND="[#TYPE] eq 'date' or [#TYPE] eq 'datetime' or [#TYPE] eq 'time'">
	<input size="30" type="text" name="[#FULLVARNAME]" id="[#VARNAME]" [#EVENTATTR] value="[(#VALUE|humandate)]" />

<ELSE/>
<!--[ --------------- IMAGE ------------- ]-->	    
<IF COND="[#TYPE] eq 'image'">
  <table><tr>
    <IF COND="[#VALUE]"><td><img src="[(#VALUE|vignette(100))]" alt="[#VALUE]"></td></IF>
    <td>
    <IF COND="[#VALUE]">
      <input type="radio" class="noText" name="[#FULLVARNAME][radio]" value="" />[@EDITION.KEEP_CURRENT_FILE]<br />
      <input type="radio" class="noText" name="[#FULLVARNAME][radio]" value="delete" />[@COMMON.DELETE] <br />
    </IF>
    <input type="radio" class="noText" id="[#VARNAME][radioserverfile]" name="[#VARNAME][radio]" value="serverfile" />
    <a href="#" onclick="window.open('index.php?lo=filebrowser&amp;do=view&amp;caller=[#VARNAME]','Upload','width=400,height=300,top=100,left=100');">[@EDITION.CHOOSE_A_FILE_ON_THE_SERVER]</a>&nbsp;&nbsp;<input size="40" type="text" id="[#VARNAME][localfilename]" name="[#FULLVARNAME][localfilename]" /><br />
    <input type="radio" class="noText" id="[#VARNAME][radioupload]" name="[#FULLVARNAME][radio]" value="upload" />[@EDITION.CHOOSE_A_FILE_ON_THE_HARD_DISK] <input size="40" type="file" name="[#FULLVARNAME][upload]" onchange="document.getElementById('[#VARNAME][radioupload]').click();" />
    </td>
  </tr></table>
  <input  type="hidden" id="[#VARNAME][previousvalue]" name="[#FULLVARNAME][previousvalue]"  VALUE="[#VALUE]" />
<ELSE/>
<!--[ --------------- COLOR ------------- ]-->	    
<IF COND="[#TYPE] eq 'color'">
<script language="Javascript" src="[#SHAREURL]/js/colorpicker.js"></script>
<script language="Javascript">
<!--
	var cp_[#VARNAME] = new ColorPicker(); // DIV style
-->
</script>
<input type="text" name="[#FULLVARNAME]" id="[#VARNAME]" size="7" value="[#VALUE]" />
<a href="#" onClick="cp_[#VARNAME].select(document.forms[0].[#VARNAME],'colorpicker_[#VARNAME]');return false;" name="colorpicker_[#VARNAME]" id="colorpicker_[#VARNAME]">[@ADMIN.CHOOSE_A_COLOR]</a>
<script language="JavaScript">
<!--
document.forms[0].[#VARNAME].style.backgroundColor='[#VALUE]';
cp_[#VARNAME].writeDiv();
-->
</script>
<ELSE/>
<!--[ --------------- PERSONS ------------- ]-->	    
<IF COND="[#TYPE] eq 'persons'">
<FUNC NAME="EDIT_PERSONS">
<ELSE/>
<!--[ --------------- ENTRIES ------------- ]-->	    
<IF COND="[#TYPE] eq 'entries'">
<FUNC NAME="EDIT_ENTRIES">
<ELSE/>
<!--[ --------------- ENTITIES ------------- ]-->	    
<IF COND="[#TYPE] eq 'entities'">
	<IF COND="[#CONDITION]==1">
	<a href="#" onClick="window.open('entitybrowser.php?caller=[#VARNAME]&amp;single','[@COMMON.ENTITYBROWSER]','width=500,height=500,top=100,left=100,resizable=yes,scrollbars=yes');">[@EDITION.CHOOSE_AN_ENTITY]</a>
	<input type="hidden" name="entities[[#VARNAME]]" id="[#VARNAME]" />
	<LOOP NAME="entities_select">
		<DO>
		<input type="text" id="[#VARNAME][title]" value="[#TITLE]" />
		</DO>
		<ALTERNATIVE>
		<input type="text" id="[#VARNAME][title]" />
		</ALTERNATIVE>
	</LOOP>
	<ELSE/>
	<a href="#" onClick="window.open('entitybrowser.php?caller=[#VARNAME]','[@COMMON.ENTITYBROWSER]','width=500,height=500,top=100,left=100,resizable=yes,scrollbars=yes');">[@EDITION.CHOOSE_ENTITIES]</a>
	<select id="[#VARNAME][select]" row="3" multiple >
	<LOOP NAME="entities_select">
		<DO>
		<option value="[#ID]">[#G_TITLE]</option>
		</DO>
		<AFTER>
			</select>
			<input type="hidden" name="entities[[#VARNAME]]" id="[#VARNAME]" value="[#ALL]" />

		</AFTER>
		<ALTERNATIVE>
			</select>
			<input type="hidden" name="entities[[#VARNAME]]" id="[#VARNAME]" value="" />
		</ALTERNATIVE>
	</LOOP>

	</IF>
<ELSE/>
<!--[ --------------- FILES ------------- ]-->	
<IF COND="[#TYPE] eq 'file'">
		<table>
		<IF COND="[#VALUE]"><tr><td>[@COMMON.FILE] :<strong>[(#VALUE)]</strong></td></tr></IF>
    <tr><td>
	  <IF COND="[#VALUE]">
			<input type="radio" class="noText" name="[#FULLVARNAME][radio]" value="" />[@EDITION.KEEP_CURRENT_FILE]<br />
			<input type="radio" class="noText" name="[#FULLVARNAME][radio]" value="delete" />[@COMMON.DELETE] <br />
		</IF>
		<input type="radio" class="noText" id="[#VARNAME][radioserverfile]" name="[#FULLVARNAME][radio]" value="serverfile" />
	   <a href="#" onClick="window.open('index.php?lo=filebrowser&amp;do=view&amp;caller=[#VARNAME]','Upload','width=400,height=300,top=100,left=100');">[@EDITION.CHOOSE_A_FILE_ON_THE_SERVER]</a>&nbsp;&nbsp;<input size="40" type="text" id="[#VARNAME][localfilename]" name="[#FULLVARNAME][localfilename]" /><br />
		<input type="radio" class="noText" id="[#VARNAME][radioupload]" name="[#FULLVARNAME][radio]" value="upload" />[@EDITION.CHOOSE_A_FILE_ON_THE_HARD_DISK] <input size="40" type="file" name="[#FULLVARNAME][upload]" onChange="document.getElementById('[#VARNAME][radioupload]').click();" />
		</td></tr></table>
	  <input  type="hidden" id="[#VARNAME][previousvalue]" name="[#FULLVARNAME][previousvalue]"  VALUE="[#VALUE]" />
<ELSE/>
<!--[ --------------- LIST ------------ -------------- ]-->
<IF COND="[#TYPE] EQ 'list'">
	<MACRO NAME="EDIT_LIST">
<ELSE/>

???? Don't know how to edit this field. Type: [#TYPE] !
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>
</IF>

<!--[ error management ]-->
<LOOP NAME="fielderror" FIELD="[#VARNAME]">
<a id="[#VARNAME]"></a>
<span class="error">
	 <FUNC NAME="PRINT_ERROR_MESSAGE" TITLE="[#TITLE]" />
</span>
</LOOP>
</DEFFUNC>


<!--[ -----------------------------------------------------------
      Widget for editing a multilingual text
--------------------------------------------------------------- ]-->

<DEFFUNC NAME="EDIT_MLTEXT">
  <div id="mltext_[#VARNAME]" class="mltexteditionarea" >
  <LOOP NAME="mltext"> <!--[ champ multilingue ]-->
    <div ><label class="labelmltext">[(#LANG|humanlang|ucfirst)] :</label> 
	<FUNC NAME="PRINT_EDIT_FIELD" TYPE="text" EDITION="[#EDITION]" VARNAME="[#VARNAME][[#LANG]]" FULLVARNAME="data[[#VARNAME]][[#LANG]]" VALUE="[#VALUE]" />
	<a href="#" onclick="deletelanginmltext(this);return false;" class="delete">[@COMMON.DELETE]</a>
    </div>
  </LOOP>
  <div id="mltext_[#VARNAME]_for_copy" style="display: none;">
	<label class="labelmltext">XXX</label>
	<FUNC NAME="PRINT_EDIT_FIELD" TYPE="text" EDITION="[#EDITION]" VARNAME="[#VARNAME][__lodel_wildcard]" FULLVARNAME="data[[#VARNAME]][__lodel_wildcard]" VALUE="" />
	<a href="#" onclick="deletelanginmltext(this);return false;" class="delete">[@COMMON.DELETE]</a>
  </div>
  <div>
	  <select onchange="addlanginmltext(this,'[#VARNAME]');"><?php makeselectlangs(); ?></select>
  </div>
  </div>
</DEFFUNC>


<!--[ -----------------------------------------------------------
      Widget for editing person
--------------------------------------------------------------- ]-->

<DEFFUNC NAME="EDIT_PERSONS">
	<div class="add">
         <a href="#down" onClick="addpersons(this,'[#VARNAME]');return false;" class="add">[@COMMON.ADD]</a>
	</div>
  <div id="persons_[#VARNAME]" class="personseditionarea" >
        <LOOP NAME="persontypes" TABLE="persontypes,classes" WHERE="classes.class=persontypes.class AND type='[#VARNAME]' AND classes.classtype='persons'">
        <LET VAR="idtype">[#ID]</LET>
	<LOOP NAME="persons_in_entities">
        <DO>
		<LOOP NAME="edition_fields">
			<BEFORE>
			<div class="oneItem">
			</BEFORE>
		        <DO>
			  <label for="[#NAME]">[#TITLE] :</label><br class="nobr" />
			<FUNC NAME="PRINT_EDIT_FIELD" VARNAME="persons[[#IDTYPE]][[#DEGREE]][data][[#NAME]]" FULLVARNAME="persons[[#IDTYPE]][[#DEGREE]][data][[#NAME]]" VALUE="[#VALUE]" TYPE="[#TYPE]" EDITION="[#EDITION]" EDITIONPARAMS="[#EDITIONPARAMS]">
			<br />
		        </DO>
	        	<AFTER>
			<div class="delete">
                        <a href="#" onclick="deletepersons(this); return false;" class="delete">[@COMMON.DELETE]</a>
			</div>
			</div>
        		</AFTER>
	    	</LOOP>
	</DO>
	<AFTER>
            <input type="hidden" name="persons[[#VARNAME]][maxdegree]" value="[#MAXDEGREE]" />
	</AFTER>
	<ALTERNATIVE>
            <input type="hidden" name="persons[[#VARNAME]][maxdegree]" value="0" />
	</ALTERNATIVE>
	</LOOP>
        <!--[ widget available for adding new persons of this type ]-->
 	<LOOP NAME="edition_fields">
		<BEFORE>
	       		<div id="persons_[#VARNAME]_for_copy" style="display:none">
			<div class="oneItem">
		</BEFORE>
		<DO>
			
				<label for="[#NAME]">[#TITLE] :</label><br class="nobr" />
				<FUNC NAME="PRINT_EDIT_FIELD" VARNAME="persons[[#IDTYPE]][__lodel_wildcard][data][[#NAME]]" FULLVARNAME="persons[[#IDTYPE]][__lodel_wildcard][data][[#NAME]]" VALUE="" TYPE="[#TYPE]" EDITION="[#EDITION]" EDITIONPARAMS="[#EDITIONPARAMS]">
			<br />
		</DO>
        	<AFTER>
			<div class="delete">
                        <a href="#" onclick="deletepersons(this,'[#VARNAME]'); return false;" class="delete">[@COMMON.DELETE]</a>
			</div>
			</div>
			</div>
        	</AFTER>
	    </LOOP>
      </LOOP>

  </div>
</DEFFUNC>


<!--[ -----------------------------------------------------------
      Widget for editing entry
--------------------------------------------------------------- ]-->

<DEFFUNC NAME="EDIT_ENTRIES">
  <div id="entries_[#VARNAME]" class="entrieseditionarea" >
        <LOOP NAME="entrytypes" TABLE="entrytypes,classes" WHERE="classes.class=entrytypes.class AND type='[#VARNAME]' AND classes.classtype='entries'">
        <LET VAR="idtype">[#ID]</LET>

	<!--[ -----------[ SELECT ]---------- ]-->
	
	<IF COND="[#EDITION] EQ 'select'">
	<select id="entries[[#IDTYPE]]" name="entries[[#IDTYPE]]">
		<LOOP NAME="entries_in_entities">
		<option value="[#G_NAME|htmlspecialchars]" [#SELECTED]>[#ROOT][#G_NAME]</option>
		</LOOP>
	</select>
	<ELSE/>
	<!--[ -----------[ MULTIPLE SELECT ]---------- ]-->
	<IF COND="[#EDITION] EQ 'multipleselect'">
	<FUNC NAME="JS_MULTIPLESELECT">
	<table>
	<tr><td>
	<input type="hidden" value="" name="entries[[#IDTYPE]]" id="entries[[#IDTYPE]]" />	
	<select onchange="multipleSelectUpdate('entries[[#IDTYPE]]','pool_member_[#VARNAME]')" multiple="multiple" size="10" style="width:250px" id="pool_member_[#VARNAME]" name="pool_member_[#VARNAME]">
		<LOOP NAME="entries_in_entities">
		<option  value="[#G_NAME|htmlspecialchars]" [#SELECTED]>[#ROOT][#G_NAME]</option>
		</LOOP>
	</select>
	<script type="text/javascript">
	<!-- 
		multipleSelectUpdate('entries[[#IDTYPE]]','pool_member_[#VARNAME]');
	-->
	</script>
	</td></tr>	
	</table>
	<ELSE/>
	<!--[ -----------[ POOL ]---------- ]-->
	<IF COND="[#EDITION] EQ 'pool'">
	<FUNC NAME="JS_POOL">
	<table>
	<tr><td>[@COMMON.AVAILABLE_ENTRIES]</td><td></td><td>[@COMMON.SELECTED_ENTRIES]</td></tr>
	<tr><td>
	<input type="hidden" value="" name="entries[[#IDTYPE]]" id="entries[[#IDTYPE]]" />	
	<select multiple="multiple" size="10" style="width:250px" id="pool_candidats_[#VARNAME]" name="pool_candidats_[#VARNAME]">
		<LOOP NAME="entries_in_entities">
		<option value="[#G_NAME|htmlspecialchars]" [#SELECTED]>[#G_NAME]</option>
		</LOOP>
	</select>
	</td><td>
		<input type="button" value="&rarr;" onclick="addmember('pool_candidats_[#VARNAME]', 'pool_member_[#VARNAME]', 'entries[[#IDTYPE]]')" /><br/>
		<input type="button" value="&larr;" onclick="removemember('pool_member_[#VARNAME]','entries[[#IDTYPE]]')" />&nbsp;
	<td>	
	<select multiple="multiple" size="10" style="width:250px" id="pool_member_[#VARNAME]" name="pool_member_[#VARNAME]">	
	</select>
	</td>
	<IF COND="[#NEWBYIMPORTALLOWED]">
	<td>
	<input type="button" value="[@COMMON.ADD]" onclick="addnewmember('pool_member_[#VARNAME]', 'entries[[#IDTYPE]]')"/><br/>
	<input type="button" value="[@COMMON.MODIFY]" onclick="modifymember('pool_member_[#VARNAME]', 'entries[[#ID]]')"/>
	</td>
	</IF>
	</tr>
	</table>
	<script type="text/javascript"><!-- 
addmember('pool_candidats_[#VARNAME]', 'pool_member_[#VARNAME]', 'entries[[#IDTYPE]]'); 
--></script>



	</IF>
	</IF>
	</IF>

	</LOOP>
    </div>
</DEFFUNC>


<!--[ -----------------------------------------------------------
      JS for advanced feature in the edition of entities

	A Transferer dans le fichier edit_entities_edition.html !!!!!!!!!!!!!!!!!!!!!
--------------------------------------------------------------- ]-->
<DEFMACRO NAME="JS_EDITION_ENTITIES">
	<script type="text/javascript">
<!--

		function addlanginmltext(obj,name){
			var index = obj.selectedIndex;
			var lang = obj.options[index].value;
			if (lang=='--') return;
			var langfull = obj.options[index].childNodes[0].nodeValue;

			var block=document.getElementById('mltext_'+name+'_for_copy')
			var clone=block.cloneNode(true);
			clone.style.display="block";

			// label
			var label=clone.getElementsByTagName('label');
			label[0].childNodes[0].nodeValue=langfull+' :';

			// other fields
			clone.setAttribute('id','');
			changeNameAttributes(clone,lang);

			document.getElementById('mltext_'+name).appendChild(clone);
			obj.selectedIndex=0;
		}

		function deletelanginmltext(obj) 
		{
			// get the edit box
			obj=obj.parentNode;
			var edit=obj.getElementsByTagName("input");
			if (edit.length<1) {
				edit=obj.getElementsByTagName("textarea");
			}
			if (edit[0].value.length>0) {
			 if (!confirm("[@EDITION.CONFIRMATION_DELETE_MLTEXT]")) return;
			}
			obj.parentNode.removeChild(obj);
		}

                function addpersons(obj,name) {
			var block=document.getElementById('persons_'+name+'_for_copy');
			var clone=block.cloneNode(true);
			clone.style.display='block';

                        degreeobj=document.getElementsByName('persons['+name+'][maxdegree]');

			// other fields
			clone.setAttribute('id','');
                        degreeobj[0].value++;
			changeNameAttributes(clone,degreeobj[0].value);
			
			document.getElementById('persons_'+name).appendChild(clone);
			obj.selectedIndex=0;
		}

		function deletepersons(obj,name) 
		{
			// get the edit box
			obj=obj.parentNode.parentNode;
			var edit=obj.getElementsByTagName("input");
                        var bconfirm=false;
                        for(i=0; i<edit.length; i++) {
                           if (edit[i].value.length>0) bconfirm=true;
                        }
			edit=obj.getElementsByTagName("textarea");
                        for(i=0; i<edit.length; i++) {
                           if (edit[i].value.length>0) bconfirm=true;
                        }
			if (edit.length<1) {
				edit=obj.getElementsByTagName("textarea");
			}
			if (bconfirm) {
			 if (!confirm("[@EDITION.CONFIRMATION_DELETE_PERSONS]")) return;
			}
			obj.parentNode.removeChild(obj);
                        // don't decrease the degree, so that we are sure it is always maximal
		}                


		function changeNameAttributes(obj,index)
		{
			for(i=0; i<obj.childNodes.length; i++) {
				var child=obj.childNodes[i];
				if (child.getAttribute) {
				var name=child.getAttribute('name');
				if (name) {
					newname=name.replace(/__lodel_wildcard/gi,index);
					child.setAttribute('id',newname);
					child.setAttribute('name',newname);
				}
				}
			}
		}	
	//
	--></script>
</DEFMACRO>



<!--[ -----------------------------------------------------------
	"List" edition. Various kind of widget are implemented depending
	on the EDITION field.
--------------------------------------------------------------- ]-->

<DEFMACRO NAME="EDIT_LIST">
	<IF COND="[#EDITION] EQ 'multipleselect'">
		<FUNC NAME="JS_MULTIPLESELECT">
		<table>
		<tr><td>
		<input type="hidden" value="" name="[#FULLVARNAME]" id="[#VARNAME]" />	
		<select onchange="multipleSelectUpdate('[#VARNAME]','select_[#VARNAME]')" multiple="multiple" size="4" style="width:100px" id="select_[#VARNAME]" name="select_[#VARNAME]">
			<LOOP NAME="field_selection_values">
			<option value="[#VALUE]" [#SELECTED]>[#VALUE]</option>
			</LOOP>
		</select>
		<script type="text/javascript">
		<!-- 
			multipleSelectUpdate('[#VARNAME]','select_[#VARNAME]');
		-->
		</script>
		</td></tr>	
		</table>
	<ELSE/>
	<IF COND="[#EDITION] EQ 'radio'">
		<FUNC NAME="JS_RADIOS">
		<input type="hidden" value="" name="[#FULLVARNAME]" id="[#VARNAME]" />	
		<LOOP NAME="field_selection_values">
			<input onchange="radiosSelectUpdate('[#VARNAME]','radio_[#VARNAME]')" type="radio" class="noText" 
							id="radio_[#VARNAME]" name="radio_[#VARNAME]" 
							value="[#VALUE]" [#CHECKED] />&nbsp;[#VALUE]
		</LOOP>
		<script type="text/javascript">
		<!-- 
			radiosSelectUpdate('[#VARNAME]','radio_[#VARNAME]');
		-->
		</script>
	<ELSE/>
	<IF COND="[#EDITION] EQ 'checkbox'">
	<FUNC NAME="JS_CHECKBOXES">
		<input type="hidden" value="" name="[#FULLVARNAME]" id="[#VARNAME]" />	
		<LOOP NAME="field_selection_values">
			<input onchange="checkboxesSelectUpdate('[#VARNAME]','checkbox_[#VARNAME]')" type="checkbox" class="noText" 
							id="checkbox_[#VARNAME]" name="checkbox_[#VARNAME]" 
							value="[#VALUE]" [#CHECKED] />&nbsp;[#VALUE]
		</LOOP>
	<script type="text/javascript">
		<!-- 
			checkboxesSelectUpdate('[#VARNAME]','checkbox_[#VARNAME]');
		-->
		</script>
	<ELSE/>
		<select id="[#VARNAME]" name="[#FULLVARNAME]">
		<LOOP NAME="field_selection_values">
			<option value="[#VALUE]" [#SELECTED]>[#VALUE]</option> 
		</LOOP>
		</select>		
	</IF>
	</IF>
	</IF>
</DEFMACRO>


<!--[*************************************]-->
<!--[ Javascript function to update list  ]-->
<!--[ of type multipleselect              ]-->
<!--[*************************************]-->
<DEFFUNC NAME="JS_MULTIPLESELECT">
<script type="text/javascript">
	<!--
	function multipleSelectUpdate(textfield, selectfield)
	{
		var txt = document.getElementById(textfield);
		var slct = document.getElementById(selectfield);
		var str = '';
		if(slct.length > 0)
		{
			for(i=0; i< slct.length; i++)
			{
				if(slct.options[i].selected==true)
					str += slct.options[i].value + ',';
			}
		}
		txt.value = str.substring(0, str.length - 1);
		//alert('value='+txt.value);
	}
	-->
	</script>
</DEFFUNC>
<!--[*************************************]-->
<!--[ Javascript function to update list  ]-->
<!--[ of type radios											]-->
<!--[*************************************]-->
<DEFFUNC NAME="JS_RADIOS">
	<script type="text/javascript">
	<!--
	function radiosSelectUpdate(textfield, selectfield)
	{
		var txt = document.getElementById(textfield);
		var slct = document.getElementsByName(selectfield);
		var str = '';
		
		if(slct.length > 0)
		{
			for(i=0; i< slct.length; i++)
			{
				if(slct[i].checked==true)
				{
					str = slct[i].value;
					break;
				}
			}
		}
		txt.value = str;
	}
	-->
	</script>
</DEFFUNC>

<!--[*************************************]-->
<!--[ Javascript function to update list  ]-->
<!--[ of type checkboxes									]-->
<!--[*************************************]-->
<DEFFUNC NAME="JS_CHECKBOXES">
	<script type="text/javascript">
	<!--
	function checkboxesSelectUpdate(textfield, selectfield)
	{
		var txt = document.getElementById(textfield);
		var slct = document.getElementsByName(selectfield);
		var str = '';
	
		if(slct.length > 0)
		{
			for(i=0; i< slct.length; i++)
			{
				if(slct[i].checked==true)
					str += slct[i].value+',';
				
			}
		}
		txt.value = str.substring(0, str.length - 1);
	}
	-->
	</script>
</DEFFUNC>


<!--[ -----------------------------------------------------------
      JS for the pool. Defined in a function to appear only once

	A Transferer dans le fichier edit_entities_edition.html !!!!!!!!!!!!!!!!!!!!!
--------------------------------------------------------------- ]-->

<DEFFUNC NAME="JS_POOL">
<script type="text/javascript">
<!--

function trim(inputString) {
   // Removes leading and trailing spaces from the passed string. Also removes
   // consecutive spaces and replaces it with one space. If something besides
   // a string is passed in (null, custom object, etc.) then return the input.
   if (typeof inputString != "string") { return inputString; }
   var retValue = inputString;
   var ch = retValue.substring(0, 1);
   while (ch == " ") { // Check for spaces at the beginning of the string
      retValue = retValue.substring(1, retValue.length);
      ch = retValue.substring(0, 1);
   }
   ch = retValue.substring(retValue.length-1, retValue.length);
   while (ch == " ") { // Check for spaces at the end of the string
      retValue = retValue.substring(0, retValue.length-1);
      ch = retValue.substring(retValue.length-1, retValue.length);
   }
   while (retValue.indexOf("  ") != -1) { // Note that there are two spaces in the string - look for multiple spaces within the string
      retValue = retValue.substring(0, retValue.indexOf("  ")) + retValue.substring(retValue.indexOf("  ")+1, retValue.length); // Again, there are two spaces in each of the strings
   }
   return retValue; // Return the trimmed string back to the user
} // Ends the "trim" function


function addmember(candidats, membres, textfield){	
	var cand = document.getElementById(candidats);
	var memb = document.getElementById(membres);
	for(i=0; i<cand.length; i++){
		if(cand.options[i].selected){
			opttxt = cand.options[i].text;
			optval = cand.options[i].value;
			dbl = false;
			if(memb.length > 0){
				for(j=0; j < memb.length; j++){
					if(memb.options[j].value == optval){
						dbl = true;
					}
				}
			}
			if(dbl == false){
				newopt = new Option(opttxt, optval);
				memb.options[memb.length] = newopt;
			}
			cand.options[i].selected=false;
		}
	}
	updatetxt(textfield, membres);
}

function removemember(membres, textfield){	
	var memb = document.getElementById(membres);
	if(memb.length>0){
		for(i=0; i < memb.length; i++){
			if(memb.options[i].selected){
				memb.options[i] = null;
				i--;
			}
		}
	}
	updatetxt(textfield, membres);
}


function addnewmember(membres, textfield) {

	var val = prompt("[@EDITION.ENTER_LIST_OF_WORDS]","");
	if (val==null) return;

	var memb = document.getElementById(membres);
	var tab = val.split(",");
	for(i=0; i<tab.length; i++){
		opttxt = trim(tab[i]);
		optval = trim(tab[i]);
		dbl = false;
		if(memb.length > 0){
			for(j=0; j < memb.length; j++){
				if(memb.options[j].value == optval){
					dbl = true;
				}
			}
		}
		if(dbl == false && optval){
			newopt = new Option(opttxt, optval);
			memb.options[memb.length] = newopt;
		}
	}
	updatetxt(textfield, membres);
}


function updatetxt(textfield, selectfield){
	var txt = document.getElementById(textfield);
	var slct = document.getElementById(selectfield);
	var str = ''
	if(slct.length > 0){
		for(i=0; i< slct.length; i++){
			str += slct.options[i].value + ',';
		}
	}
	txt.value = str.substring(0, str.length - 1);
}


function modifymember(members,textfield){
	memb = document.getElementById(members);
	if(memb.length>0){
		for(i=0; i < memb.length; i++){
			if(memb.options[i].selected){
				var val = prompt("",memb.options[i].value);
				if(val == null) break;//val=memb.options[i].value; // get out, stop editing!
				val=val.replace(/,/," ");
				if(val != ''){
					memb.options[i].value = val;
					memb.options[i].text = val;
				}else{
					memb.options[i]=null;
				}

			}
		}
	}
	updatetxt(textfield, members);
}
-->
</script>
</DEFFUNC>

<!--[*************************************************]-->
<!--[ Search Engine function													]-->
<!--[ Show the search form														]-->
<!--[*************************************************]-->
<DEFFUNC NAME="SEARCH_ENGINE" OPTIONAL="query,qstatus,qtype,qfield,qnbresults">

<form id="searchform" action="search.php" method="get">
<fieldset>
<input class="searchfields" type="text" name="query" value="<IF COND="![#QUERY]"><ELSE/>[#QUERY|htmlspecialchars|stripslashes]</IF>" />
<input class="searchbutton" type="submit" name="submit_s" value="<IF COND="[#QUERY]">[@EDITION.BUTTON_REFINE_YOUR_SEARCH]<ELSE/>[@EDITION.BUTTON_SEARCH]</IF>" />
<a href="#" onclick="if(document.getElementById('advanced_search').style.display=='none'){document.getElementById('advanced_search').style.display='inline';} else {document.getElementById('advanced_search').style.display='none';} ">
	<span class="texte_petit">[@EDITION.SEE_ADVANCED_SEARCH]</span>
</a>
<div  id="advanced_search" <IF COND="![#QSTATUS] AND ![#QTYPE] AND ![#QFIELD]">style="display : none"</IF>>
<fieldset class="searchfieldset">
<legend>[@EDITION.ADVANCED_SEARCH]</legend>
<select id="qnbresults" name="qnbresults" class="searchfields">
	<option value="10" <IF COND="[#QNBRESULTS] EQ 10">selected="selected"</IF>>10 [@EDITION.RESULTS_PER_PAGE]</option>
	<option value="20" <IF COND="[#QNBRESULTS] EQ 20">selected="selected"</IF>>20 [@EDITION.RESULTS_PER_PAGE]</option>
	<option value="50" <IF COND="[#QNBRESULTS] EQ 50">selected="selected"</IF>>50 [@EDITION.RESULTS_PER_PAGE]</option>
	<option value="100" <IF COND="[#QNBRESULTS] EQ 100">selected="selected"</IF>>100 [@EDITION.RESULTS_PER_PAGE]</option>
</select>
<LOOP NAME="listtypes" TABLE="types" ORDER="rank">
<BEFORE>
	&nbsp;[@EDITION.SEARCH_IN_TYPE]&nbsp;
	<select  id="qtype" name="qtype" class="searchfields" <!--[onchange="updatefields(this);"]-->>
	<option id="[#CLASS]_[#ID]" value=""> -- [@EDITION.ALL_TYPES] -- </option>
</BEFORE>
<DO>
	<option id="[#CLASS]_[#ID]" value="[#ID]"<IF COND="[#ID] EQ [#QTYPE]">selected="selected"</IF>><MACRO NAME="DISPLAY_ALTERTITLE"></option>
</DO>
<AFTER>
	</select>
</AFTER>
</LOOP>
&nbsp;[@EDITION.SEARCH_IN_STATUS]&nbsp;
<select  id="qstatus" name="qstatus" class="searchfields">
	<option value=""> -- [@EDITION.ALL_STATUS] -- </option>
	<option value="+16" <IF COND="[#QSTATUS] EQ 16">selected="selected"</IF>>[@COMMON.PROTECTED]</option>
	<option value="+1" <IF COND="[#QSTATUS] EQ 1">selected="selected"</IF>>[@COMMON.PUBLISHED]</option>
	<option value="-1" <IF COND="[#QSTATUS] EQ -1">selected="selected"</IF>>[@COMMON.READY_FOR_PUBLICATION]</option>
	<option value="-16" <IF COND="[#QSTATUS] EQ -16">selected="selected"</IF>>[@COMMON.DRAFT]</option>
</select>
&nbsp;[@EDITION.SEARCH_IN_FIELD]&nbsp;
<select id="qfield" name="qfield" class="searchfields">
<option value=""> -- [@EDITION.ALL_FIELDS] --</option>
<!--[<LOOP NAME="list_indexable_fields" TABLE="tablefields" SELECT="class,name,title" WHERE="weight GT 0" ORDER="class,name">
<DO>
	<option value="[#CLASS].[#NAME]">[#CLASS] &rarr; [#NAME|ucfirst]</option>
</DO>
<ALTERNATIVE>
	[@EDITION.NO_SEARCHABLE_FIELDS]
</ALTERNATIVE>
</LOOP>
]-->
	<option value="DC.Title" <IF COND="[#QFIELD] EQ 'DC.Title'">selected="selected"</IF>>[@COMMON.TITLE]</option>
	<option value="DC.Description" <IF COND="[#QFIELD] EQ 'DC.Description'">selected="selected"</IF>>[@COMMON.DESCRIPTION]</option>
	<option value="DC.Format" <IF COND="[#QFIELD] EQ 'DC.Format'">selected="selected"</IF>>[@COMMON.FORMAT]</option>
	<option value="DC.Language" <IF COND="[#QFIELD] EQ 'DC.Language'">selected="selected"</IF>>[@COMMON.LANG]</option>
</select>


</fieldset>
</div>
</fieldset>
</form>		
</DEFFUNC>


<!--[*************************************************]-->
<!--[ Added 2005-02-02																]-->
<!--[ Your search bar macro														]-->
<!--[*************************************************]-->
<DEFMACRO NAME="YOUR_SEARCH_BAR">
[@COMMON.YOUR_QUERY|sprintf([#QUERY|stripslashes],[#NBRESULTS])]
<div class="searchInfos">
<IF COND="[#QTYPE]">
	<LOOP NAME="print_title_type" TABLE="types" WHERE="id='[#QTYPE]'">
	[@COMMON.TYPE] <strong><MACRO NAME="DISPLAY_ALTERTITLE"></strong>
	</LOOP>
</IF>
<IF COND="[#QFIELD]">
	[@COMMON.FIELD] <strong>[#QFIELD]</strong>
</IF>
<IF COND="[#QSTATUS]">
([@COMMON.STATUS] 
	<IF COND="[#QSTATUS] EQ -16">
	[@COMMON.DRAFT]
	</IF>
	<IF COND="[#QSTATUS] EQ -1">
	[@COMMON.READY_FOR_PUBLICATION]
	</IF>
	<IF COND="[#QSTATUS] EQ 1">
	[@COMMON.PUBLISHED]
	</IF>
	<IF COND="[#QSTATUS] EQ 16">
	[@COMMON.PROTECTED]
	</IF>
)
</IF>

<IF COND="[#NBRESULTS] GT 0">
([@EDITION.SEARCH_RESULTS_INFORMATIONS|sprintf([#RESULTFROM],[#RESULTTO],[#NBRESULTS])])
<ELSE/>
([#NBRESULTS] [@COMMON.RESULTS])
</IF>
 
</div>
</div>
</div>
</DEFMACRO>

<!--[*************************************************]-->
<!--[ Added 2005-03-07																]-->
<!--[ Bottom Results pages list (use page_scale loop)	]-->
<!--[*************************************************]-->
<DEFMACRO NAME="BOTTOM_RESULTS_PAGES">
<LOOP NAME="page_scale">
	<BEFORE>
		<div id="navResults" style="background-image:url([#SHAREURL]/images/fond_edition_des_series.png);">
		<IF COND="[#PREVIOUSURL]">
			<a href="[#PREVIOUSURL]" title="Page prï¿½ï¿½ente">
				<img src="[#SHAREURL]/images/triangle2.gif" alt="&lt;&lt;" />
			</a>
	<!--[		<img style="vertical-align : middle" src="[#SHAREURL]/images/separateur.png" alt="-" />
		]-->
		</IF>
	</BEFORE>
	<DO>
		<IF COND="[#HOLE] EQ 1">
			&nbsp;...&nbsp;
		</IF>
		<IF COND="[#URLPAGE] NE ''">
			<a class="linkpage" href="[#URLPAGE]" title="[#PAGENUMBER]">
		<ELSE/>
			<span class="currentpage">
		</IF>
		
		[#PAGENUMBER]
		<IF COND="[#URLPAGE] NE ''">
			</a>
		<ELSE/>
			</span>
		</IF>
	
	</DO>
	
	<AFTER>
		<IF COND="[#NEXTURL]">
		
			<a class="linkpage" href="[#NEXTURL]" title="Page suivante">
				<img src="[#SHAREURL]/images/triangle.gif" alt="&gt;&gt;" />
			</a>
		</IF>
	</div>
	</AFTER>
	<ALTERNATIVE>
	</ALTERNATIVE>
</LOOP>
</DEFMACRO>
<!--[*************************************************]-->
<!--[ Added 2005-03-07																]-->
<!--[ Javascript for help printing of interface				]-->
<!--[ edition choice																	]-->
<!--[*************************************************]-->
<DEFMACRO NAME="JS_HELP_INTERFACE_EDITION">
<script type="text/javascript">

	function update_help()
	{
		var help_box = document.getElementById('help_interface_edition');
		var type_of_selection = document.getElementById('edition').value;
		help_box.innerHTML = "[@COMMON.HELP_EDITION_PARAMETER_" + type_of_selection + "]";
		return true;
	}


</script>
</DEFMACRO>

<!--[
Affichage du titre internationalisé.
Utilise altertitle et le filtre multiligue.
Si c'est vide alors utilise le champ title

]-->
<DEFMACRO NAME="DISPLAY_ALTERTITLE">
	<LET VAR="INTERTITLE">[#ALTERTITLE|multilingue([#LODELUSER.LANG])]</LET>
	<IF COND="[#INTERTITLE] EQ ''">[#TITLE]<ELSE/>[#INTERTITLE]</IF>
</DEFMACRO>